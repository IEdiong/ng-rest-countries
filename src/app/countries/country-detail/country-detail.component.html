<main class="py-10 lg:py-20">
  <div class="container px-7 lg:px-6 max-w-[1328px]">
    <button (click)="onBack()" class="shadow-back px-8 py-2 rounded-md">
      &larr; <span class="ml-2">Back</span>
    </button>

    <section
      *ngIf="countryDetail$ | async as country; else loading"
      class="mt-16 lg:mt-20 flex flex-col lg:flex-row items-start lg:justify-between lg:gap-x-8 relative overflow-hidden"
    >
      <div
        class="flex-1 max-w-[560px] rounded-[10px] overflow-hidden shadow-flag relative aspect-[560/401]"
      >
        <img
          [src]="country.flag"
          alt="flag of {{ country.name }}"
          class="h-full w-full object-cover aspect-[560/401]"
        />
      </div>
      <div class="flex-1 max-w-[600px] py-11 lg:py-[39px]">
        <h1
          class="font-extrabold text-[22px] md:text-[32px] leading-[30px] md:leading-[44px]"
        >
          {{ country.name }}
        </h1>

        <div
          class="flex flex-col md:flex-row gap-x-3 gap-y-8 justify-between mt-4 lg:mt-[23px] max-w-[510px] text-sm md:text-base"
        >
          <ul class="flex flex-col gap-2 shrink-0">
            <li class="font-light">
              <span class="font-semibold">Native Name:</span>
              {{ country.nativeName }}
            </li>
            <li class="font-light">
              <span class="font-semibold">Population:</span>
              {{ country.population | number }}
            </li>
            <li class="font-light">
              <span class="font-semibold">Region:</span>
              {{ country.region }}
            </li>
            <li class="font-light">
              <span class="font-semibold">Sub Region:</span>
              {{ country.subregion }}
            </li>
            <li class="font-light">
              <span class="font-semibold">Capital:</span>
              {{ country.capital }}
            </li>
          </ul>
          <ul class="flex flex-col gap-2 w-fit">
            <li class="font-light">
              <span class="font-semibold">Top Level Domain:</span>
              {{ country.topLevelDomain[0] }}
            </li>
            <li class="font-light">
              <span class="font-semibold">Currencies:</span>
              {{ country.currencies[0].name }}
            </li>
            <li class="font-light">
              <span class="font-semibold">Languages:</span>
              {{ languages }}
            </li>
          </ul>
        </div>

        <div
          class="mt-[68px] flex flex-wrap md:flex-nowrap items-start gap-x-4 gap-y-4"
        >
          <p class="font-semibold mt-1 shrink-0">Border Countries:</p>
          <div class="flex gap-[10px] flex-wrap">
            <ng-container *ngIf="borderCountries.length > 0">
              <a
                [routerLink]="['/countries', borderCountry.code.toLowerCase()]"
                *ngFor="let borderCountry of borderCountries"
                class="shadow-tag px-[10px] shrink-0 rounded-sm min-w-24 h-7 flex items-center justify-center text-sm font-light"
              >
                {{ borderCountry.name }}
              </a>
            </ng-container>
          </div>
        </div>
      </div>
    </section>
    <ng-template #loading>
      <section
        class="mt-16 lg:mt-20 w-full flex flex-col lg:flex-row items-start lg:justify-between lg:gap-x-8 relative overflow-hidden"
      >
        <div
          class="animate-pulse flex-1 w-full max-w-[560px] rounded-[10px] overflow-hidden shadow-flag relative aspect-[560/401]"
        >
          <div class="bg-slate-200 dark:bg-slate-700 w-full h-full"></div>
        </div>
        <div class="flex-1 w-full max-w-[600px] py-11 lg:py-[39px]">
          <div
            class="bg-slate-200 dark:bg-slate-700 rounded-full w-1/3 h-[30px]"
          ></div>

          <div
            class="flex flex-col md:flex-row gap-x-3 gap-y-8 justify-between mt-4 lg:mt-[23px] max-w-[510px] text-sm md:text-base"
          >
            <ul class="flex flex-col gap-2 w-[50%] shrink-0">
              <li class="font-light">
                <div
                  class="bg-slate-200 dark:bg-slate-700 rounded-full w-full h-[24px]"
                ></div>
              </li>
              <li class="font-light">
                <div
                  class="bg-slate-200 dark:bg-slate-700 rounded-full w-full h-[24px]"
                ></div>
              </li>
              <li class="font-light">
                <div
                  class="bg-slate-200 dark:bg-slate-700 rounded-full w-full h-[24px]"
                ></div>
              </li>
              <li class="font-light">
                <div
                  class="bg-slate-200 dark:bg-slate-700 rounded-full w-full h-[24px]"
                ></div>
              </li>
              <li class="font-light">
                <div
                  class="bg-slate-200 dark:bg-slate-700 rounded-full w-full h-[24px]"
                ></div>
              </li>
            </ul>
            <ul class="flex flex-col gap-2 w-[40%]">
              <li class="font-light">
                <div
                  class="bg-slate-200 dark:bg-slate-700 rounded-full w-full h-[24px]"
                ></div>
              </li>
              <li class="font-light">
                <div
                  class="bg-slate-200 dark:bg-slate-700 rounded-full w-full h-[24px]"
                ></div>
              </li>
              <li class="font-light">
                <div
                  class="bg-slate-200 dark:bg-slate-700 rounded-full w-full h-[24px]"
                ></div>
              </li>
            </ul>
          </div>

          <div
            class="mt-[68px] flex flex-wrap md:flex-nowrap items-start gap-x-4 gap-y-4"
          >
            <div
              class="bg-slate-200 dark:bg-slate-700 rounded-full w-full h-[34px]"
            ></div>
          </div>
        </div>
      </section>
    </ng-template>
  </div>
</main>
